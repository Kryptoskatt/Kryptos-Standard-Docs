openapi: 3.0.3
info:
  title: Kryptos Connect APIs
  description: |
    Comprehensive API for accessing cryptocurrency portfolio data, transactions, DeFi holdings, NFT collections, and user analytics.

    ## API Versions

    - **V0 Endpoints** (`/v0/*`) - Legacy data format with original data structure
    - **V1 Endpoints** (`/v1/*`) - Modern data format with V2 standardized structure and enhanced features

    ## Authentication

    All endpoints (except `/health`) require authentication using API Keys.

    Include your API key in the request header:
    ```
    X-API-Key: your_api_key_here
    ```

    Refer to the Kryptos documentation for instructions on creating API keys.

  version: 1.0.0
  contact:
    name: Kryptos Support
    email: support@kryptoskatt.com
    url: https://docs.kryptoskatt.com

servers:
  - url: https://connect.kryptos.io/api
    description: Production API

tags:
  - name: Health
    description: Service health check endpoints
  - name: V0 - Wallets (Legacy)
    description: Legacy wallet endpoints with original data format
  - name: V0 - Transactions (Legacy)
    description: Legacy transaction endpoints with original data format
  - name: V0 - NFT Holdings (Legacy)
    description: Legacy NFT holdings endpoints with original data format
  - name: V0 - DeFi Holdings (Legacy)
    description: Legacy DeFi holdings endpoints with original data format
  - name: V1 - User Info
    description: User information and profile endpoints (V2 format)
  - name: V1 - Holdings
    description: Cryptocurrency holdings endpoints with enhanced data (V2 format)
  - name: V1 - Transactions
    description: Transaction endpoints with V2 standardized structure
  - name: V1 - DeFi Holdings
    description: DeFi positions with V2 format transformation
  - name: V1 - NFT Holdings
    description: NFT collection management with V2 format
  - name: V1 - Profiling
    description: User analytics and profiling endpoints (V2 format)

security:
  - ApiKeyAuth: []

paths:
  /health:
    get:
      tags:
        - Health
      summary: Health check
      description: Check the health status of the Connect APIs service
      operationId: healthCheck
      security: []
      responses:
        '200':
          description: Service is healthy
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                  service:
                    type: string
                  version:
                    type: string
                  environment:
                    type: string
              example:
                status: "OK"
                service: "connect-apis"
                version: "1.0.0"
                environment: "production"
      x-code-samples:
        - lang: JavaScript
          label: Axios
          source: |
            const axios = require('axios');

            const response = await axios.get('https://connect.kryptos.io/api/health');
            console.log(response.data);
        - lang: Python
          source: |
            import requests

            response = requests.get('https://connect.kryptos.io/api/health')
            print(response.json())

  # V0 ENDPOINTS (LEGACY)
  /v0/wallets:
    get:
      tags:
        - V0 - Wallets (Legacy)
      summary: Get user wallets (Legacy format)
      description: |
        **LEGACY ENDPOINT** - Returns original data format

        Retrieve user's cryptocurrency wallets with pagination support.
      operationId: getWalletsV0
      parameters:
        - name: portfolioId
          in: query
          description: Filter wallets by portfolio ID
          schema:
            type: string
        - name: limit
          in: query
          description: Number of wallets to return
          schema:
            type: integer
            default: 100
            minimum: 1
            maximum: 1000
        - name: offset
          in: query
          description: Number of wallets to skip for pagination
          schema:
            type: integer
            default: 0
            minimum: 0
        - name: includeCount
          in: query
          description: Include total count in response
          schema:
            type: boolean
            default: false
      responses:
        '200':
          description: Wallets retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  wallets:
                    type: array
                    items:
                      type: object
                      properties:
                        walletId:
                          type: string
                        name:
                          type: string
                        public_name:
                          type: string
                        address:
                          type: string
                        logo_url:
                          type: string
                        portfolioId:
                          type: string
                        portfolioName:
                          type: string
                        chain:
                          type: string
                        type:
                          type: string
                  user_id:
                    type: string
                  pagination:
                    type: object
                    properties:
                      limit:
                        type: integer
                      offset:
                        type: integer
                      returned_count:
                        type: integer
                      total_count:
                        type: integer
                      has_more:
                        type: boolean
              example:
                wallets:
                  - walletId: "wallet_123"
                    name: "ethereum_wallet"
                    public_name: "My Ethereum Wallet"
                    address: "0x742d35Cc6634C0532925a3b844Bc9e7595f0bEb"
                    logo_url: "https://example.com/logo.png"
                    portfolioId: "portfolio_1"
                    portfolioName: "Main Portfolio"
                    chain: "ethereum"
                    type: "metamask"
                user_id: "user_123"
                pagination:
                  limit: 20
                  offset: 0
                  returned_count: 15
                  total_count: 42
                  has_more: true
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '500':
          $ref: '#/components/responses/InternalServerError'
      x-code-samples:
        - lang: JavaScript
          label: Axios
          source: |
            const axios = require('axios');

            const response = await axios.get('https://connect.kryptos.io/api/v0/wallets', {
              headers: {
                'X-API-Key': 'your_api_key_here'
              },
              params: {
                limit: 20,
                offset: 0,
                includeCount: true
              }
            });
            console.log(response.data);
        - lang: Python
          source: |
            import requests

            headers = {
                'X-API-Key': 'your_api_key_here'
            }
            params = {
                'limit': 20,
                'offset': 0,
                'includeCount': True
            }
            response = requests.get(
                'https://connect.kryptos.io/api/v0/wallets',
                headers=headers,
                params=params
            )
            print(response.json())

  /v0/transactions:
    get:
      tags:
        - V0 - Transactions (Legacy)
      summary: Get user transactions (Legacy format)
      description: |
        **LEGACY ENDPOINT** - Returns original data format

        Retrieve user's transaction history with advanced filtering options.
      operationId: getTransactionsV0
      parameters:
        - $ref: '#/components/parameters/WalletIdParam'
        - $ref: '#/components/parameters/CurrencyIdParam'
        - $ref: '#/components/parameters/TrxIdParam'
        - $ref: '#/components/parameters/IsNftParam'
        - $ref: '#/components/parameters/IsMissingPriceParam'
        - $ref: '#/components/parameters/IsMissingPurchaseParam'
        - $ref: '#/components/parameters/IsEditedParam'
        - $ref: '#/components/parameters/IsManualParam'
        - $ref: '#/components/parameters/TransactionTypeParam'
        - $ref: '#/components/parameters/LabelParam'
        - $ref: '#/components/parameters/OrderParam'
        - $ref: '#/components/parameters/TimeStartParam'
        - $ref: '#/components/parameters/TimeEndParam'
        - $ref: '#/components/parameters/LimitParam'
      responses:
        '200':
          description: Transactions retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  transactions:
                    type: array
                    items:
                      type: object
                  total_count:
                    type: integer
                  user_id:
                    type: string
                  timestamp:
                    type: integer
                    format: int64
                  filters_applied:
                    type: object
              example:
                message: "User transactions retrieved successfully"
                transactions:
                  - id: "trx_123"
                    transactionId: "0xabc123..."
                    timestamp: 1609459200000
                    transactionType: "trade"
                    label: "Swap"
                    sentCurrency:
                      currency: "ETH"
                      amount: 1.5
                      id: "ethereum"
                      chain: "ethereum"
                    receivedCurrency:
                      currency: "USDC"
                      amount: 3000
                      id: "usd-coin"
                      chain: "ethereum"
                    fee:
                      currency: "ETH"
                      amount: 0.005
                    netValue:
                      fiatValue: 3000
                      baseCurrency: "USD"
                    source:
                      walletId: "wallet_123"
                      name: "ethereum_wallet"
                      address: "0x742d35..."
                total_count: 156
                user_id: "user_123"
                timestamp: 1640995200000
                filters_applied:
                  timeRange:
                    start: 1609459200000
                    end: 1640995200000
                  order: "desc"
                  limit: 10
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '500':
          $ref: '#/components/responses/InternalServerError'
      x-code-samples:
        - lang: JavaScript
          label: Axios
          source: |
            const axios = require('axios');

            const response = await axios.get('https://connect.kryptos.io/api/v0/transactions', {
              headers: {
                'X-API-Key': 'your_api_key_here'
              },
              params: {
                limit: 10,
                timeStart: 1609459200000,
                order: 'desc'
              }
            });
            console.log(response.data);
        - lang: Python
          source: |
            import requests

            headers = {
                'X-API-Key': 'your_api_key_here'
            }
            params = {
                'limit': 10,
                'timeStart': 1609459200000,
                'order': 'desc'
            }
            response = requests.get(
                'https://connect.kryptos.io/api/v0/transactions',
                headers=headers,
                params=params
            )
            print(response.json())

    post:
      tags:
        - V0 - Transactions (Legacy)
      summary: Create transactions (Legacy format)
      description: |
        **LEGACY ENDPOINT** - Accepts original data format

        Create new transactions manually.
      operationId: createTransactionsV0
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - walletId
                - transactions
              properties:
                walletId:
                  type: string
                transactions:
                  type: array
                  items:
                    type: object
                    required:
                      - timestamp
                      - transactionType
                    properties:
                      timestamp:
                        type: integer
                        format: int64
                      transactionType:
                        type: string
                      transactionId:
                        type: string
                      description:
                        type: object
                        properties:
                          title:
                            type: string
                          desc:
                            type: string
                      sentCurrency:
                        type: object
                        properties:
                          currency:
                            type: string
                          amount:
                            type: number
                      receivedCurrency:
                        type: object
                        properties:
                          currency:
                            type: string
                          amount:
                            type: number
                      label:
                        type: string
            example:
              walletId: "wallet_123"
              transactions:
                - timestamp: 1640995200000
                  transactionType: "trade"
                  transactionId: "manual_001"
                  description:
                    title: "Manual Trade"
                    desc: "Bought Bitcoin"
                  sentCurrency:
                    currency: "USD"
                    amount: 50000
                  receivedCurrency:
                    currency: "BTC"
                    amount: 1.0
                  label: "Purchase"
      responses:
        '201':
          description: Transactions created successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  data:
                    type: array
                    items:
                      type: object
                  count:
                    type: integer
                  user_id:
                    type: string
                  timestamp:
                    type: integer
                    format: int64
              example:
                message: "1 transaction(s) created successfully"
                data: []
                count: 1
                user_id: "user_123"
                timestamp: 1640995200000
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '500':
          $ref: '#/components/responses/InternalServerError'
      x-code-samples:
        - lang: JavaScript
          label: Axios
          source: |
            const axios = require('axios');

            const data = {
              walletId: "wallet_123",
              transactions: [
                {
                  timestamp: 1640995200000,
                  transactionType: "trade",
                  transactionId: "manual_001",
                  description: {
                    title: "Manual Trade",
                    desc: "Bought Bitcoin"
                  },
                  sentCurrency: {
                    currency: "USD",
                    amount: 50000
                  },
                  receivedCurrency: {
                    currency: "BTC",
                    amount: 1.0
                  },
                  label: "Purchase"
                }
              ]
            };

            const response = await axios.post(
              'https://connect.kryptos.io/api/v0/transactions',
              data,
              {
                headers: {
                  'X-API-Key': 'your_api_key_here',
                  'Content-Type': 'application/json'
                }
              }
            );
            console.log(response.data);
        - lang: Python
          source: |
            import requests

            headers = {
                'X-API-Key': 'your_api_key_here',
                'Content-Type': 'application/json'
            }
            data = {
                "walletId": "wallet_123",
                "transactions": [
                    {
                        "timestamp": 1640995200000,
                        "transactionType": "trade",
                        "transactionId": "manual_001",
                        "description": {
                            "title": "Manual Trade",
                            "desc": "Bought Bitcoin"
                        },
                        "sentCurrency": {
                            "currency": "USD",
                            "amount": 50000
                        },
                        "receivedCurrency": {
                            "currency": "BTC",
                            "amount": 1.0
                        },
                        "label": "Purchase"
                    }
                ]
            }
            response = requests.post(
                'https://connect.kryptos.io/api/v0/transactions',
                headers=headers,
                json=data
            )
            print(response.json())

  /v0/nft-holdings:
    get:
      tags:
        - V0 - NFT Holdings (Legacy)
      summary: Get NFT holdings (Legacy format)
      description: |
        **LEGACY ENDPOINT** - Returns original data format

        Retrieve user's NFT holdings with basic filtering and sorting.
      operationId: getNFTHoldingsV0
      parameters:
        - name: limit
          in: query
          description: Number of NFTs to return
          schema:
            type: integer
            minimum: 1
            maximum: 1000
        - name: sortByHighestValue
          in: query
          description: Sort by highest USD value
          schema:
            type: boolean
            default: true
      responses:
        '200':
          description: NFT holdings retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  holdings:
                    type: array
                    items:
                      type: object
                  user_id:
                    type: string
                  total_count:
                    type: integer
                  base_currency:
                    type: string
                  limit_applied:
                    type: integer
                  sorted_by_highest_value:
                    type: boolean
              example:
                holdings:
                  - id: "nft_123"
                    name: "Bored Ape #1234"
                    contract_address: "0x..."
                    token_id: "1234"
                    usd_price: 150000
                    converted_price: 150000
                    converted_currency: "USD"
                    collection:
                      name: "Bored Ape Yacht Club"
                      floor_price:
                        - value: 50
                          paymentToken:
                            currency: "ETH"
                    source:
                      walletId: "wallet_123"
                      address: "0x742d35..."
                user_id: "user_123"
                total_count: 5
                base_currency: "USD"
                limit_applied: 10
                sorted_by_highest_value: true
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '500':
          $ref: '#/components/responses/InternalServerError'
      x-code-samples:
        - lang: JavaScript
          label: Axios
          source: |
            const axios = require('axios');

            const response = await axios.get('https://connect.kryptos.io/api/v0/nft-holdings', {
              headers: {
                'X-API-Key': 'your_api_key_here'
              },
              params: {
                limit: 10,
                sortByHighestValue: true
              }
            });
            console.log(response.data);
        - lang: Python
          source: |
            import requests

            headers = {
                'X-API-Key': 'your_api_key_here'
            }
            params = {
                'limit': 10,
                'sortByHighestValue': True
            }
            response = requests.get(
                'https://connect.kryptos.io/api/v0/nft-holdings',
                headers=headers,
                params=params
            )
            print(response.json())

  /v0/defi-holdings:
    get:
      tags:
        - V0 - DeFi Holdings (Legacy)
      summary: Get DeFi holdings (Legacy format)
      description: |
        **LEGACY ENDPOINT** - Returns original data format

        Retrieve user's DeFi positions with basic filtering and sorting.
      operationId: getDefiHoldingsV0
      parameters:
        - name: docId
          in: query
          description: Fetch specific DeFi holding by document ID
          schema:
            type: string
        - name: limit
          in: query
          description: Number of holdings to return
          schema:
            type: integer
            minimum: 1
            maximum: 1000
        - name: sortByHighestValue
          in: query
          description: Sort by highest net value
          schema:
            type: boolean
            default: true
      responses:
        '200':
          description: DeFi holdings retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  holdings:
                    type: array
                    items:
                      type: object
                  user_id:
                    type: string
                  base_currency:
                    type: string
                  total_defi_value:
                    type: number
                  total_count:
                    type: integer
                  sorted_by_highest_value:
                    type: boolean
              example:
                holdings:
                  - id: "defi_123"
                    name: "Aave"
                    chain: "ethereum"
                    type: "lending"
                    stats:
                      net_usd_value: 50000
                      asset_usd_value: 52000
                      debt_usd_value: 2000
                      converted_net_value: 50000
                      converted_currency: "USD"
                    portfolio_entry:
                      supply_token_list:
                        - currency: "USDC"
                          amount: 50000
                    source:
                      walletId: "wallet_123"
                      address: "0x742d35..."
                user_id: "user_123"
                base_currency: "USD"
                total_defi_value: 50000
                total_count: 3
                sorted_by_highest_value: true
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '500':
          $ref: '#/components/responses/InternalServerError'
      x-code-samples:
        - lang: JavaScript
          label: Axios
          source: |
            const axios = require('axios');

            const response = await axios.get('https://connect.kryptos.io/api/v0/defi-holdings', {
              headers: {
                'X-API-Key': 'your_api_key_here'
              },
              params: {
                limit: 10
              }
            });
            console.log(response.data);
        - lang: Python
          source: |
            import requests

            headers = {
                'X-API-Key': 'your_api_key_here'
            }
            params = {
                'limit': 10
            }
            response = requests.get(
                'https://connect.kryptos.io/api/v0/defi-holdings',
                headers=headers,
                params=params
            )
            print(response.json())

  # V1 ENDPOINTS (MODERN V2 FORMAT)
  /v1/userinfo:
    get:
      tags:
        - V1 - User Info
      summary: Get user information
      description: |
        **V2 FORMAT** - Modern standardized data structure

        Get user information including profile and email.
      operationId: getUserInfo
      responses:
        '200':
          description: User information retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  userInfo:
                    type: object
                    properties:
                      sub:
                        type: string
                        description: User ID
                      name:
                        type: string
                      email:
                        type: string
                      email_verified:
                        type: boolean
                      preferred_username:
                        type: string
                  scopes:
                    type: array
                    items:
                      type: string
              example:
                message: "User information retrieved successfully"
                userInfo:
                  sub: "user_123"
                  name: "John Doe"
                  email: "john@example.com"
                  email_verified: true
                  preferred_username: "john@example.com"
                scopes: ["openid", "profile", "email"]
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '500':
          $ref: '#/components/responses/InternalServerError'
      x-code-samples:
        - lang: JavaScript
          label: Axios
          source: |
            const axios = require('axios');

            const response = await axios.get('https://connect.kryptos.io/api/v1/userinfo', {
              headers: {
                'X-API-Key': 'your_api_key_here'
              }
            });
            console.log(response.data);
        - lang: Python
          source: |
            import requests

            headers = {
                'X-API-Key': 'your_api_key_here'
            }
            response = requests.get(
                'https://connect.kryptos.io/api/v1/userinfo',
                headers=headers
            )
            print(response.json())

  /v1/holdings:
    get:
      tags:
        - V1 - Holdings
      summary: Get cryptocurrency holdings
      description: |
        **V2 FORMAT** - Modern standardized data structure

        Retrieve comprehensive cryptocurrency holdings with asset distribution across wallets,
        cost basis calculations, and performance metrics.
      operationId: getHoldings
      responses:
        '200':
          description: Holdings retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  holdings:
                    type: array
                    items:
                      type: object
                  summary:
                    type: object
                  user_id:
                    type: string
                  timestamp:
                    type: integer
                    format: int64
              example:
                holdings:
                  - asset:
                      tokenId: "bitcoin"
                      symbol: "BTC"
                      publicName: "Bitcoin"
                      chainId: "bitcoin"
                      logoUrl: "https://..."
                      type: "crypto"
                      category: "crypto"
                    totalQuantity: 2.5
                    costbasis: 100000
                    marketPrice: 50000
                    marketValue: 125000
                    unrealizedPnL: 25000
                    baseCurrency: "USD"
                    24hrChange: 3.5
                    marketLinks:
                      coinmarketcap: "https://..."
                    assetDistribution:
                      - quantity: 1.5
                        account:
                          provider: "Ledger"
                          walletId: "wallet_123"
                        allocationPercentage: 60
                      - quantity: 1.0
                        account:
                          provider: "MetaMask"
                          walletId: "wallet_456"
                        allocationPercentage: 40
                summary:
                  totalValue: 250000
                  totalCostBasis: 200000
                  totalUnrealizedPnL: 50000
                  roiPercentage: 25
                  total24hrChange: 2.8
                user_id: "user_123"
                timestamp: 1640995200000
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '500':
          $ref: '#/components/responses/InternalServerError'
      x-code-samples:
        - lang: JavaScript
          label: Axios
          source: |
            const axios = require('axios');

            const response = await axios.get('https://connect.kryptos.io/api/v1/holdings', {
              headers: {
                'X-API-Key': 'your_api_key_here'
              }
            });
            console.log(response.data);
        - lang: Python
          source: |
            import requests

            headers = {
                'X-API-Key': 'your_api_key_here'
            }
            response = requests.get(
                'https://connect.kryptos.io/api/v1/holdings',
                headers=headers
            )
            print(response.json())

  /v1/transactions:
    get:
      tags:
        - V1 - Transactions
      summary: Get user transactions
      description: |
        **V2 FORMAT** - Modern standardized data structure

        Retrieve user's transaction history with V2 format transformation,
        enhanced asset details, and comprehensive filtering options.
      operationId: getTransactions
      parameters:
        - $ref: '#/components/parameters/WalletIdParam'
        - $ref: '#/components/parameters/CurrencyIdParam'
        - $ref: '#/components/parameters/TrxIdParam'
        - $ref: '#/components/parameters/IsNftParam'
        - $ref: '#/components/parameters/IsMissingPriceParam'
        - $ref: '#/components/parameters/IsMissingPurchaseParam'
        - $ref: '#/components/parameters/IsEditedParam'
        - $ref: '#/components/parameters/IsManualParam'
        - $ref: '#/components/parameters/TransactionTypeParam'
        - $ref: '#/components/parameters/LabelParam'
        - $ref: '#/components/parameters/OrderParam'
        - $ref: '#/components/parameters/TimeStartParam'
        - $ref: '#/components/parameters/TimeEndParam'
        - $ref: '#/components/parameters/LimitParam'
      responses:
        '200':
          description: Transactions retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  data:
                    type: array
                    items:
                      type: object
                  user_id:
                    type: string
                  timestamp:
                    type: integer
                    format: int64
              example:
                message: "User transactions retrieved successfully"
                data:
                  - id: "trx_123"
                    transactionPlatfromId: "0xabc123..."
                    timestamp: 1640995200000
                    label: "Swap"
                    description: "Swapped ETH for USDC"
                    incomingAssets:
                      - asset:
                          tokenId: "usd-coin"
                          symbol: "USDC"
                          publicName: "USD Coin"
                          type: "crypto"
                        quantity: 3000
                        price: 1.0
                        baseCurrency: "USD"
                        timestamp: 1640995200000
                        type: "incoming"
                        toAccount:
                          provider: "MetaMask"
                          walletId: "wallet_123"
                          publicAddress: "0x742d35..."
                    outgoingAssets:
                      - asset:
                          tokenId: "ethereum"
                          symbol: "ETH"
                          publicName: "Ethereum"
                          type: "crypto"
                        quantity: 1.5
                        price: 2000
                        baseCurrency: "USD"
                        timestamp: 1640995200000
                        type: "outgoing"
                        fromAccount:
                          provider: "MetaMask"
                          walletId: "wallet_123"
                          publicAddress: "0x742d35..."
                    fee:
                      - asset:
                          tokenId: "ethereum"
                          symbol: "ETH"
                          type: "crypto"
                        quantity: 0.005
                        price: 2000
                        baseCurrency: "USD"
                        type: "fee"
                    metadata:
                      importSource: "API"
                      isManual: false
                      isEdited: false
                      isDefiTrx: false
                      isNFTTrx: false
                    tags: []
                    ledger: []
                    rawTrx: {}
                user_id: "user_123"
                timestamp: 1640995200000
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '500':
          $ref: '#/components/responses/InternalServerError'
      x-code-samples:
        - lang: JavaScript
          label: Axios
          source: |
            const axios = require('axios');

            const response = await axios.get('https://connect.kryptos.io/api/v1/transactions', {
              headers: {
                'X-API-Key': 'your_api_key_here'
              },
              params: {
                limit: 5,
                order: 'desc'
              }
            });
            console.log(response.data);
        - lang: Python
          source: |
            import requests

            headers = {
                'X-API-Key': 'your_api_key_here'
            }
            params = {
                'limit': 5,
                'order': 'desc'
            }
            response = requests.get(
                'https://connect.kryptos.io/api/v1/transactions',
                headers=headers,
                params=params
            )
            print(response.json())

  /v1/defi-holdings:
    get:
      tags:
        - V1 - DeFi Holdings
      summary: Get DeFi holdings
      description: |
        **V2 FORMAT** - Modern standardized data structure

        Retrieve user's DeFi positions with V2 format transformation,
        protocol details, and advanced filtering options.
      operationId: getDefiHoldings
      parameters:
        - name: source
          in: query
          description: Filter by data sources (comma-separated, max 30)
          schema:
            type: string
            example: "debank,zapper"
        - name: protocol
          in: query
          description: Filter by DeFi protocols (comma-separated, max 30)
          schema:
            type: string
            example: "aave,compound,uniswap"
        - name: chain
          in: query
          description: Filter by blockchain networks (comma-separated)
          schema:
            type: string
            example: "ethereum,polygon,arbitrum"
        - name: limit
          in: query
          description: Number of holdings to return
          schema:
            type: integer
            default: 100
            minimum: 1
            maximum: 1000
        - name: offset
          in: query
          description: Number of holdings to skip for pagination
          schema:
            type: integer
            default: 0
            minimum: 0
      responses:
        '200':
          description: DeFi holdings retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  holdings:
                    type: array
                    items:
                      type: object
                  pagination:
                    type: object
                  user_id:
                    type: string
              example:
                holdings:
                  - holdingId: "defi_123"
                    owner:
                      provider: "MetaMask"
                      walletId: "wallet_123"
                      publicAddress: "0x742d35..."
                    protocolName: "Aave V3"
                    chain: "ethereum"
                    logoUrl: "https://..."
                    siteUrl: "https://aave.com"
                    category: "lending"
                    portfolio:
                      category: "other"
                      positions:
                        - asset:
                            tokenId: "usd-coin"
                            symbol: "USDC"
                            publicName: "USD Coin"
                          amount: "50000"
                          value:
                            price: 50000
                            baseCurrency: "USD"
                            timestamp: 1640995200000
                      rewardPositions: []
                    totalValue:
                      price: 52000
                      baseCurrency: "USD"
                    netValue:
                      price: 50000
                      baseCurrency: "USD"
                    createdAt: 1640995200000
                    updatedAt: 1640995200000
                    isActive: false
                pagination:
                  limit: 10
                  offset: 0
                user_id: "user_123"
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '500':
          $ref: '#/components/responses/InternalServerError'
      x-code-samples:
        - lang: JavaScript
          label: Axios
          source: |
            const axios = require('axios');

            const response = await axios.get('https://connect.kryptos.io/api/v1/defi-holdings', {
              headers: {
                'X-API-Key': 'your_api_key_here'
              },
              params: {
                chain: 'ethereum',
                limit: 10
              }
            });
            console.log(response.data);
        - lang: Python
          source: |
            import requests

            headers = {
                'X-API-Key': 'your_api_key_here'
            }
            params = {
                'chain': 'ethereum',
                'limit': 10
            }
            response = requests.get(
                'https://connect.kryptos.io/api/v1/defi-holdings',
                headers=headers,
                params=params
            )
            print(response.json())

  /v1/nft-holdings:
    get:
      tags:
        - V1 - NFT Holdings
      summary: Get NFT holdings
      description: |
        **V2 FORMAT** - Modern standardized data structure

        Retrieve user's NFT collection with V2 format transformation,
        collection details, metadata, and advanced filtering options.
      operationId: getNFTHoldings
      parameters:
        - name: source
          in: query
          description: Filter by data sources (comma-separated, max 30)
          schema:
            type: string
            example: "opensea,alchemy"
        - name: collection
          in: query
          description: Filter by NFT collections (comma-separated, max 30)
          schema:
            type: string
            example: "boredapeyachtclub,cryptopunks"
        - name: chain
          in: query
          description: Filter by blockchain networks (comma-separated)
          schema:
            type: string
            example: "ethereum,polygon"
        - name: tokenId
          in: query
          description: Filter by specific token ID
          schema:
            type: string
        - name: contract
          in: query
          description: Filter by contract address
          schema:
            type: string
        - name: limit
          in: query
          description: Number of NFTs to return
          schema:
            type: integer
            default: 100
            minimum: 1
            maximum: 1000
        - name: offset
          in: query
          description: Number of NFTs to skip for pagination
          schema:
            type: integer
            default: 0
            minimum: 0
      responses:
        '200':
          description: NFT holdings retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  holdings:
                    type: array
                    items:
                      type: object
                  pagination:
                    type: object
                  user_id:
                    type: string
              example:
                holdings:
                  - id: "nft_123"
                    contractAddress: "0xBC4CA0EdA7647A8aB7C2061c2E118A18a936f13D"
                    tokenId: "1234"
                    name: "Bored Ape #1234"
                    description: "A unique NFT from the BAYC collection"
                    contentType: "image/png"
                    nftUrl: "https://..."
                    thumbnailUrl: "https://..."
                    source:
                      provider: "MetaMask"
                      walletId: "wallet_123"
                      publicAddress: "0x742d35..."
                    ercType: "ERC-721"
                    amount: 1
                    price:
                      price: 150000
                      baseCurrency: "USD"
                    isNftSpam: false
                    collection:
                      collectionId: "bayc"
                      name: "Bored Ape Yacht Club"
                      description: "..."
                      imageUrl: "https://..."
                      floorPrice:
                        - price: 50
                          baseCurrency: "ETH"
                      ownerCount: 6000
                      totalQuantity: 10000
                      socialLinks:
                        - platform: "twitter"
                          url: "https://twitter.com/BoredApeYC"
                    lastSale:
                      fromAddress: "0x..."
                      toAddress: "0x742d35..."
                      quantity: 1
                      timestamp: "2023-01-15T10:30:00Z"
                      transactionHash: "0xdef456..."
                      marketplaceName: "OpenSea"
                      totalPrice:
                        price: 45
                        baseCurrency: "ETH"
                pagination:
                  limit: 5
                  offset: 0
                user_id: "user_123"
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '500':
          $ref: '#/components/responses/InternalServerError'
      x-code-samples:
        - lang: JavaScript
          label: Axios
          source: |
            const axios = require('axios');

            const response = await axios.get('https://connect.kryptos.io/api/v1/nft-holdings', {
              headers: {
                'X-API-Key': 'your_api_key_here'
              },
              params: {
                chain: 'ethereum',
                limit: 5
              }
            });
            console.log(response.data);
        - lang: Python
          source: |
            import requests

            headers = {
                'X-API-Key': 'your_api_key_here'
            }
            params = {
                'chain': 'ethereum',
                'limit': 5
            }
            response = requests.get(
                'https://connect.kryptos.io/api/v1/nft-holdings',
                headers=headers,
                params=params
            )
            print(response.json())

  /v1/profiling:
    get:
      tags:
        - V1 - Profiling
      summary: Get user profiling and analytics
      description: |
        **V2 FORMAT** - Modern standardized data structure

        Retrieve comprehensive user profiling data including:
        - Intelligent user classification (NFT Maniac, DeFi Hodler, BTC Keeper, etc.)
        - Time-based activity analysis (last 7/30/365 days)
        - Portfolio breakdown with top holdings
        - 24-hour performance metrics
        - Complete user metadata
      operationId: getProfilingData
      responses:
        '200':
          description: Profiling data retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  user_id:
                    type: string
                  base_currency:
                    type: string
                  user_classification:
                    type: string
                    enum: [NFT Maniac, DeFi Hodler, Futures Trader, BTC Keeper, Degen, Hodler]
                  summary:
                    type: object
                  transactions:
                    type: object
                  portfolio:
                    type: object
                  user_metadata:
                    type: object
              example:
                user_id: "user_123"
                base_currency: "USD"
                user_classification: "Defi Hodler"
                summary:
                  classification: "Defi Hodler"
                  portfolio_overview:
                    total_value: 275000
                    currency: "USD"
                    size_category: "Medium"
                    dominant_category: "DeFi"
                    dominant_percentage: 54.5
                    change_24h_percentage: 2.8
                    unrealized_pnl: 75000
                    roi_percentage: 37.5
                  asset_breakdown:
                    regular_crypto:
                      value: 100000
                      percentage: 36.4
                      count: 8
                    nfts:
                      value: 25000
                      percentage: 9.1
                      count: 5
                    defi:
                      value: 150000
                      percentage: 54.5
                      count: 3
                  activity_summary:
                    total_transactions: 342
                    activity_level: "High"
                    activity_description: "45 transactions this month"
                    recent_activity:
                      last_week: 12
                      last_month: 45
                      last_year: 342
                    top_transaction_types:
                      - label: "DeFi"
                        count: 156
                      - label: "Swap"
                        count: 89
                      - label: "Transfer"
                        count: 67
                  summary_text: "Defi Hodler with medium portfolio (275,000 USD). DeFi dominant at 54.5%. Portfolio up 2.80% (24h) ðŸ“ˆ. High activity - 45 transactions this month."
                transactions:
                  total: 342
                  breakdown:
                    - type: "swap"
                      count: 156
                    - type: "deposit"
                      count: 89
                  labels:
                    - label: "DeFi"
                      count: 156
                portfolio:
                  regular_holdings:
                    top_5:
                      - symbol: "BTC"
                        name: "Bitcoin"
                        value: 50000
                        quantity: 1.0
                        currency: "USD"
                        change_24h_percentage: 2.5
                        unrealized_pnl: 10000
                    total_value: 100000
                    count: 8
                  nft_holdings:
                    top_5: []
                    total_value_usd: 25000
                    total_value_converted: 25000
                    count: 5
                  defi_holdings:
                    top_5: []
                    total_value_usd: 150000
                    total_value_converted: 150000
                    count: 3
                user_metadata:
                  base_currency: "USD"
                  cost_basis_type: "FIFO"
                  country: "US"
                  email: "john@example.com"
                  user_type: "premium"
                  timezone: "America/New_York"
                  is_connect: true
                  created_at: 1609459200000
                  updated_at: 1640995200000
                  last_usage: 1640995200000
                  connect_metadata:
                    last_usage: 1640995200000
                    is_anonymous: false
                    client_id: "client_123"
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '500':
          $ref: '#/components/responses/InternalServerError'
      x-code-samples:
        - lang: JavaScript
          label: Axios
          source: |
            const axios = require('axios');

            const response = await axios.get('https://connect.kryptos.io/api/v1/profiling', {
              headers: {
                'X-API-Key': 'your_api_key_here'
              }
            });
            console.log(response.data);
        - lang: Python
          source: |
            import requests

            headers = {
                'X-API-Key': 'your_api_key_here'
            }
            response = requests.get(
                'https://connect.kryptos.io/api/v1/profiling',
                headers=headers
            )
            print(response.json())

components:
  securitySchemes:
    ApiKeyAuth:
      type: apiKey
      in: header
      name: X-API-Key
      description: |
        API key for authentication.

        Refer to the Kryptos documentation for instructions on creating API keys.

  parameters:
    WalletIdParam:
      name: walletId
      in: query
      description: Filter by wallet IDs (comma-separated)
      schema:
        type: string
        example: "wallet_123,wallet_456"

    CurrencyIdParam:
      name: currencyId
      in: query
      description: Filter by currency IDs (comma-separated)
      schema:
        type: string
        example: "bitcoin,ethereum"

    TrxIdParam:
      name: trxId
      in: query
      description: Filter by specific transaction ID
      schema:
        type: string

    IsNftParam:
      name: isNft
      in: query
      description: Filter NFT transactions only
      schema:
        type: boolean

    IsMissingPriceParam:
      name: isMissingPrice
      in: query
      description: Filter transactions with missing price data
      schema:
        type: boolean

    IsMissingPurchaseParam:
      name: isMissingPurchase
      in: query
      description: Filter transactions with missing purchase data
      schema:
        type: boolean

    IsEditedParam:
      name: isEdited
      in: query
      description: Filter manually edited transactions
      schema:
        type: boolean

    IsManualParam:
      name: isManual
      in: query
      description: Filter manually created transactions
      schema:
        type: boolean

    TransactionTypeParam:
      name: transactionType
      in: query
      description: Filter by transaction types (comma-separated)
      schema:
        type: string
        example: "swap,deposit,withdraw"

    LabelParam:
      name: label
      in: query
      description: Filter by transaction labels (comma-separated)
      schema:
        type: string
        example: "DeFi,Swap,Purchase"

    OrderParam:
      name: order
      in: query
      description: Sort order
      schema:
        type: string
        enum: [asc, desc]
        default: asc

    TimeStartParam:
      name: timeStart
      in: query
      description: Start timestamp in milliseconds (Unix epoch)
      schema:
        type: integer
        format: int64
        default: 0
        example: 1609459200000

    TimeEndParam:
      name: timeEnd
      in: query
      description: End timestamp in milliseconds (Unix epoch)
      schema:
        type: integer
        format: int64
        example: 1640995200000

    LimitParam:
      name: limit
      in: query
      description: Maximum number of results to return
      schema:
        type: integer
        default: 100
        minimum: 1
        maximum: 1000

  responses:
    BadRequestError:
      description: Bad request - Invalid parameters
      content:
        application/json:
          schema:
            type: object
            properties:
              error:
                type: string
              message:
                type: string
              details:
                type: array
                items:
                  type: object
          example:
            error: "invalid_parameters"
            message: "Invalid query parameters"
            details:
              - code: "invalid_type"
                expected: "number"
                received: "string"
                path: ["limit"]
                message: "Expected number, received string"

    UnauthorizedError:
      description: Unauthorized - Invalid or missing API key
      content:
        application/json:
          schema:
            type: object
            properties:
              error:
                type: string
              message:
                type: string
          example:
            error: "unauthorized"
            message: "Invalid or missing authentication token"

    ForbiddenError:
      description: Forbidden - Insufficient permissions
      content:
        application/json:
          schema:
            type: object
            properties:
              error:
                type: string
              message:
                type: string
          example:
            error: "forbidden"
            message: "Insufficient scopes. Required scopes not met"

    NotFoundError:
      description: Not found - Resource does not exist
      content:
        application/json:
          schema:
            type: object
            properties:
              error:
                type: string
              message:
                type: string
          example:
            error: "not_found"
            message: "Resource not found"

    InternalServerError:
      description: Internal server error
      content:
        application/json:
          schema:
            type: object
            properties:
              error:
                type: string
              message:
                type: string
          example:
            error: "internal_server_error"
            message: "An unexpected error occurred"
